const _0x339bef=_0x4873;(function(_0x3726ea,_0x53e8bf){const _0x365607=_0x4873,_0x31e3e2=_0x3726ea();while(!![]){try{const _0x4d6a5e=parseInt(_0x365607(0x222))/0x1*(parseInt(_0x365607(0x1df))/0x2)+-parseInt(_0x365607(0x209))/0x3*(-parseInt(_0x365607(0x1f6))/0x4)+parseInt(_0x365607(0x212))/0x5+parseInt(_0x365607(0x1ee))/0x6*(-parseInt(_0x365607(0x215))/0x7)+parseInt(_0x365607(0x1fd))/0x8+-parseInt(_0x365607(0x22e))/0x9+parseInt(_0x365607(0x1fc))/0xa;if(_0x4d6a5e===_0x53e8bf)break;else _0x31e3e2['push'](_0x31e3e2['shift']());}catch(_0x5787de){_0x31e3e2['push'](_0x31e3e2['shift']());}}}(_0x17e4,0x1a580));const CONFIG={'chartJs':_0x339bef(0x22b),'ids':{'graphContainer':_0x339bef(0x237),'chart':_0x339bef(0x21a),'adContainer':'amzn-ad-container'},'article':{'title':_0x339bef(0x23d),'thumbnail':_0x339bef(0x1db),'url':'https://note.com/kosk_sdr/n/n071896d9278d'}};function addContainerStyles(){const _0x281d68=_0x339bef,_0x27a953=document[_0x281d68(0x1e2)](_0x281d68(0x211));_0x27a953[_0x281d68(0x22f)]=_0x281d68(0x21b)+CONFIG[_0x281d68(0x1e3)][_0x281d68(0x225)]+_0x281d68(0x1e9)+CONFIG[_0x281d68(0x1e3)][_0x281d68(0x1ed)]+_0x281d68(0x230)+CONFIG[_0x281d68(0x1e3)][_0x281d68(0x235)]+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG[_0x281d68(0x1e3)][_0x281d68(0x235)]+'::before\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20content:\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x20-10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x201px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG['ids']['adContainer']+_0x281d68(0x21d)+CONFIG[_0x281d68(0x1e3)]['adContainer']+_0x281d68(0x20b)+CONFIG[_0x281d68(0x1e3)]['adContainer']+_0x281d68(0x1eb)+CONFIG[_0x281d68(0x1e3)]['adContainer']+'\x20.ad-thumbnail\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20120px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x2080px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG[_0x281d68(0x1e3)][_0x281d68(0x235)]+'\x20.ad-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2013px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x2019px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20',document[_0x281d68(0x238)][_0x281d68(0x219)](_0x27a953);}function createAdContainer(){const _0x434168=_0x339bef,_0x40a271=document[_0x434168(0x1e2)](_0x434168(0x223));_0x40a271['id']=CONFIG[_0x434168(0x1e3)][_0x434168(0x235)];const _0x4b9522=document[_0x434168(0x1e2)]('a');_0x4b9522['href']=CONFIG[_0x434168(0x204)][_0x434168(0x22c)],_0x4b9522[_0x434168(0x1e5)]='ad-link',_0x4b9522[_0x434168(0x201)]=_0x434168(0x1ea),_0x4b9522['rel']=_0x434168(0x1ec);const _0x1bdb13=document[_0x434168(0x1e2)]('img');_0x1bdb13[_0x434168(0x1f0)]=CONFIG[_0x434168(0x204)][_0x434168(0x1f9)],_0x1bdb13[_0x434168(0x208)]=CONFIG['article'][_0x434168(0x1f4)],_0x1bdb13['className']=_0x434168(0x229);const _0x37d23f=document['createElement']('span');return _0x37d23f[_0x434168(0x221)]=CONFIG[_0x434168(0x204)]['title'],_0x37d23f['className']='ad-title',_0x4b9522[_0x434168(0x219)](_0x1bdb13),_0x4b9522[_0x434168(0x219)](_0x37d23f),_0x40a271[_0x434168(0x219)](_0x4b9522),_0x40a271;}function showBarChart(){const _0x2ed5bd=_0x339bef,{labels:_0x3b7817,datasets:_0x4b71fd}=createChartDataset(),_0x31cd82=createGraphContainer();console[_0x2ed5bd(0x226)](_0x3b7817,_0x4b71fd),appendGraphContainerToDOM(_0x31cd82),renderChart(_0x31cd82['querySelector']('#'+CONFIG[_0x2ed5bd(0x1e3)]['chart']),_0x3b7817,_0x4b71fd);}function initializeScript(){const _0xde1024=_0x339bef;try{if(window[_0xde1024(0x21f)][_0xde1024(0x239)]!=='www.amazon.co.jp')throw new Error('このブックマークレットはAmazon.co.jpでのみ使用できます。');if(document[_0xde1024(0x1e8)](CONFIG['ids'][_0xde1024(0x225)]))throw new Error(_0xde1024(0x210));loadChartJsLibrary();}catch(_0x30732c){alert(_0x30732c['message']);}}async function loadChartJsLibrary(){const _0x2c4e2b=_0x339bef;try{await loadScript(CONFIG[_0x2c4e2b(0x1ff)]),await clickAndScroll();}catch(_0x38e888){alert(_0x2c4e2b(0x20e)+_0x38e888['message']);}}function loadScript(_0x686d38){return new Promise((_0x17852b,_0x7a3932)=>{const _0x20e3e5=_0x4873,_0x2625b6=document[_0x20e3e5(0x1e2)](_0x20e3e5(0x1e7));_0x2625b6[_0x20e3e5(0x1f0)]=_0x686d38,_0x2625b6[_0x20e3e5(0x224)]=_0x17852b,_0x2625b6[_0x20e3e5(0x1dc)]=()=>_0x7a3932(new Error(_0x20e3e5(0x236)+_0x686d38)),document[_0x20e3e5(0x238)]['appendChild'](_0x2625b6);});}function createChartDataset(){const _0x2d1738=_0x339bef,_0x4c80f2=getAllSellersInfo(),_0xafb16f=Array['from'](new Set(_0x4c80f2['map'](_0x786d40=>_0x786d40[0x1])))[_0x2d1738(0x1f2)]((_0x11fc2a,_0xb59e1f)=>_0x11fc2a-_0xb59e1f),_0x41c8b0=filterSellersByCondition(_0x4c80f2,'新品'),_0x419ed5=filterSellersByCondition(_0x4c80f2,_0x2d1738(0x234)),_0x5dcd8f=filterSellersByCondition(_0x4c80f2,_0x2d1738(0x1de)),_0x5ea154=filterSellersByCondition(_0x4c80f2,_0x2d1738(0x205)),_0x35e51c=filterSellersByCondition(_0x4c80f2,_0x2d1738(0x1dd));return{'labels':_0xafb16f[_0x2d1738(0x1fe)](_0xa4c4f=>String(_0xa4c4f)),'datasets':[{'label':'新品','data':mapPricesToLabels(_0xafb16f,sumByIndex(_0x41c8b0)),'backgroundColor':_0x2d1738(0x218)},{'label':_0x2d1738(0x1ef),'data':mapPricesToLabels(_0xafb16f,sumByIndex(_0x419ed5)),'backgroundColor':_0x2d1738(0x1fa)},{'label':'ほぼ新品','data':mapPricesToLabels(_0xafb16f,sumByIndex(_0x5dcd8f)),'backgroundColor':'#4dc0b5'},{'label':'良い','data':mapPricesToLabels(_0xafb16f,sumByIndex(_0x5ea154)),'backgroundColor':_0x2d1738(0x203)},{'label':'可','data':mapPricesToLabels(_0xafb16f,sumByIndex(_0x35e51c)),'backgroundColor':_0x2d1738(0x1f7)}]};}function mapPricesToLabels(_0x1b3aaa,_0x16afde){const _0x4e0f66=_0x339bef,_0x4d284b=Object['fromEntries'](_0x16afde);return _0x1b3aaa[_0x4e0f66(0x1fe)](_0x4ef034=>_0x4d284b[_0x4ef034]||0x0);}function getAllSellersInfo(){const _0x4d639e=_0x339bef,_0x5ea5fe=[],_0x45d787=[document[_0x4d639e(0x23c)](_0x4d639e(0x231)),...Array[_0x4d639e(0x1f1)](document[_0x4d639e(0x1fb)]('#aod-offer'))];for(const _0x133581 of _0x45d787){const _0x2f9ddd=getStockAndPrice(_0x133581);if(_0x2f9ddd)_0x5ea5fe[_0x4d639e(0x1e4)](_0x2f9ddd);}return _0x5ea5fe;}function filterNewSellers(_0x1f7fca){const _0x3e0930=_0x339bef;return _0x1f7fca[_0x3e0930(0x20c)](_0x34dd71=>_0x34dd71[0x0]==='新品')[_0x3e0930(0x1fe)](_0x317a85=>[_0x317a85[0x1],_0x317a85[0x2]]);}function _0x4873(_0x17ac20,_0x1fd85c){const _0x17e483=_0x17e4();return _0x4873=function(_0x487308,_0x519f15){_0x487308=_0x487308-0x1d8;let _0x19548a=_0x17e483[_0x487308];return _0x19548a;},_0x4873(_0x17ac20,_0x1fd85c);}function filterSellersByCondition(_0x106b0e,_0x2e1446){const _0x6dcb4f=_0x339bef;return _0x106b0e[_0x6dcb4f(0x20c)](_0x2163f6=>_0x2163f6[0x0]===_0x2e1446)[_0x6dcb4f(0x1fe)](_0x529b63=>[_0x529b63[0x1],_0x529b63[0x2]]);}function sumByIndex(_0x2f556b){const _0x34a755=_0x339bef,_0x53d26e={};return _0x2f556b['forEach'](([_0x3aabbf,_0x51a6ef])=>{_0x53d26e[_0x3aabbf]=(_0x53d26e[_0x3aabbf]||0x0)+parseInt(_0x51a6ef);}),Object[_0x34a755(0x20d)](_0x53d26e);}function createGraphContainer(){const _0x55d186=_0x339bef,_0x3c5037=document['createElement'](_0x55d186(0x223));_0x3c5037['id']=CONFIG['ids']['graphContainer'];const _0x716aa1=createCanvas();_0x3c5037[_0x55d186(0x219)](_0x716aa1);const _0x5cd09c=document[_0x55d186(0x1e2)]('hr');_0x3c5037[_0x55d186(0x219)](_0x5cd09c);const _0x4f0a6a=createAdContainer();return _0x3c5037[_0x55d186(0x219)](_0x4f0a6a),addContainerStyles(),_0x3c5037;}function addContainerStyles(){const _0x14f2ae=_0x339bef,_0x574dc6=document[_0x14f2ae(0x1e2)](_0x14f2ae(0x211));_0x574dc6['innerHTML']=_0x14f2ae(0x21b)+CONFIG[_0x14f2ae(0x1e3)][_0x14f2ae(0x225)]+_0x14f2ae(0x21e),document[_0x14f2ae(0x238)][_0x14f2ae(0x219)](_0x574dc6);}function createCanvas(){const _0x2966b0=_0x339bef,_0x421c3c=document[_0x2966b0(0x1e2)](_0x2966b0(0x20a));return _0x421c3c['id']=CONFIG[_0x2966b0(0x1e3)]['chart'],_0x421c3c[_0x2966b0(0x1f5)]=0x118,_0x421c3c[_0x2966b0(0x217)]=0x190,_0x421c3c;}function appendGraphContainerToDOM(_0x3ca5f0){const _0x325927=_0x339bef,_0xb85eba=document['querySelector'](_0x325927(0x1e1));_0xb85eba[_0x325927(0x1d9)](_0x3ca5f0);}function renderChart(_0x4ae5a3,_0x176465,_0x4d8b15){const _0x4d0ae1=_0x339bef,_0x396d34=_0x4ae5a3[_0x4d0ae1(0x1d8)]('2d');new Chart(_0x396d34,{'type':_0x4d0ae1(0x233),'data':{'labels':_0x176465,'datasets':_0x4d8b15},'options':{'indexAxis':'y','scales':{'x':{'stacked':!![],'min':0x0},'y':{'stacked':!![],'reverse':!![]}},'responsive':!![],'plugins':{'legend':{'position':_0x4d0ae1(0x1e6)}}}});}async function scrollDivToBottom(){const _0xf4c1a0=_0x339bef,_0x476343=document[_0xf4c1a0(0x1e8)](_0xf4c1a0(0x214));if(!_0x476343){showBarChart();const _0x3deb90=document[_0xf4c1a0(0x23c)]('[data-action=\x22close-all-offers-display\x22]');if(_0x3deb90)_0x3deb90['click']();return;}try{let _0x57c511=_0x476343[_0xf4c1a0(0x22a)],_0x41388b=0x0;const _0x540081=0xa;while(_0x41388b<_0x540081){_0x476343[_0xf4c1a0(0x22a)]=_0x476343[_0xf4c1a0(0x1f8)],await new Promise(_0x3d949b=>setTimeout(_0x3d949b,0x3e8));if(_0x476343[_0xf4c1a0(0x22a)]===_0x57c511){console[_0xf4c1a0(0x226)]('Reached\x20the\x20bottom\x20of\x20the\x20scrollable\x20div.');break;}_0x57c511=_0x476343[_0xf4c1a0(0x22a)],_0x41388b++;}showBarChart();}catch(_0x2dbe0f){console['error'](_0xf4c1a0(0x232),_0x2dbe0f),alert(_0xf4c1a0(0x23a));}finally{const _0x501dcb=document[_0xf4c1a0(0x23c)](_0xf4c1a0(0x200));if(_0x501dcb)_0x501dcb['click']();}}function clickAndScroll(){const _0x57df1a=_0x339bef,_0x50af5b=document[_0x57df1a(0x23c)](_0x57df1a(0x227));if(!_0x50af5b){alert(_0x57df1a(0x207));return;}else{const _0x40e4c9=_0x50af5b[_0x57df1a(0x23c)](_0x57df1a(0x216));console[_0x57df1a(0x226)](_0x40e4c9),!_0x40e4c9?_0x50af5b['click']():_0x40e4c9['click']();}const _0x14e5ea=new MutationObserver((_0x254069,_0x5730d4)=>{const _0x2aa097=_0x57df1a;for(let _0x5e5a1b of _0x254069){if(_0x5e5a1b[_0x2aa097(0x22d)]===_0x2aa097(0x220)){const _0x5621a8=document[_0x2aa097(0x23c)](_0x2aa097(0x213));if(_0x5621a8){scrollDivToBottom(),_0x5730d4['disconnect']();break;}}}});_0x14e5ea[_0x57df1a(0x1e0)](document['body'],{'childList':!![],'subtree':!![]});}function getStockAndPrice(_0x45af75){const _0x31809d=_0x339bef;try{const _0x53c02f=_0x45af75[_0x31809d(0x23c)](_0x31809d(0x228))['textContent'][_0x31809d(0x1da)]()['replace']('\x0a','\x20')['replace'](/ +/g,'\x20'),_0x17b948=parseInt(_0x45af75[_0x31809d(0x23c)](_0x31809d(0x20f))[_0x31809d(0x202)][_0x31809d(0x21c)](/[^0-9]/g,''));let _0xd29d7e=0x1;const _0x52ebc7=_0x45af75[_0x31809d(0x23c)](_0x31809d(0x23b));if(_0x52ebc7){const _0x6e86c1=_0x52ebc7[_0x31809d(0x1fb)]('.a-declarative');_0xd29d7e=parseInt(_0x6e86c1[_0x6e86c1[_0x31809d(0x206)]-0x1]['innerText'][_0x31809d(0x21c)](/[^0-9]/g,''));}return[_0x53c02f,_0x17b948,_0xd29d7e];}catch(_0x5e6952){return console['log'](_0x31809d(0x1f3),_0x5e6952['message']),null;}}function _0x17e4(){const _0x57ab8a=['[data-action=\x22close-all-offers-display\x22]','target','innerText','#f3e20e','article','中古商品\x20-\x20良い','length','出品者が1人以下のためグラフ描画を中止します。','alt','69SfwMaW','canvas','\x20.ad-link:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#c45500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','filter','entries','Chart.jsの読み込みに失敗しました:\x20','.a-price\x20.a-price-whole','グラフはすでに表示されています。再読み込みしてから再度実行してください。','style','8975ZjTwMm','[data-action=\x22aod-close-on-esc-action\x22]','all-offers-display-scroller','1995MNdoVK','#buybox-see-all-buying-choices\x20a','height','#de7921','appendChild','amzn-chart','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','replace','\x20.ad-link\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#0066c0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20flex-start;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','location','childList','textContent','18181ddfgcm','div','onload','graphContainer','log','[data-action=\x22show-all-offers-display\x22]','#aod-offer-heading','ad-thumbnail','scrollTop','https://cdn.jsdelivr.net/npm/chart.js','url','type','1555686AAIoyX','innerHTML','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','#aod-pinned-offer','Error\x20during\x20scrolling:','bar','中古商品\x20-\x20非常に良い','adContainer','Failed\x20to\x20load\x20','amzn-graph-container','head','hostname','スクロール中にエラーが発生しました。','[id*=\x22aod-offer-qty-component-\x22]','querySelector','Amazon注文履歴自動取得ツール','getContext','after','trim','https://raw.githubusercontent.com/koskengineering/ASCFree/refs/heads/main/eyecatch.png','onerror','中古商品\x20-\x20可','中古商品\x20-\x20ほぼ新品','2xAJHYU','observe','#dynamic-aod-ingress-box,\x20#unqualifiedBuyBox','createElement','ids','push','className','top','script','getElementById','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20280px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','_blank','\x20.ad-link:hover\x20.ad-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20underline;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','noopener\x20noreferrer','chart','2928LRUZaU','非常に良い','src','from','sort','Error\x20in\x20getStockAndPrice:','title','width','27868QCBWDV','#f08080','scrollHeight','thumbnail','#5fba7d','querySelectorAll','2323310LqfEyf','58320vqHVbd','map','chartJs'];_0x17e4=function(){return _0x57ab8a;};return _0x17e4();}initializeScript();