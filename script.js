const CONFIG={'chartJs':'https://cdn.jsdelivr.net/npm/chart.js','ids':{'graphContainer':_0x42ea0a(0x150),'chart':'amzn-chart','adContainer':_0x42ea0a(0x13b)},'article':{'title':'Amazon注文履歴自動取得ツール','thumbnail':_0x42ea0a(0x161),'url':_0x42ea0a(0x157)}};function addContainerStyles(){const _0x132cdb=_0x42ea0a,_0x307e7a=document[_0x132cdb(0x13a)](_0x132cdb(0x12f));_0x307e7a[_0x132cdb(0x153)]=_0x132cdb(0x158)+CONFIG[_0x132cdb(0x10a)]['graphContainer']+_0x132cdb(0x13e)+CONFIG[_0x132cdb(0x10a)][_0x132cdb(0x10c)]+_0x132cdb(0x116)+CONFIG[_0x132cdb(0x10a)][_0x132cdb(0x10f)]+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG[_0x132cdb(0x10a)][_0x132cdb(0x10f)]+_0x132cdb(0x127)+CONFIG[_0x132cdb(0x10a)]['adContainer']+'\x20.ad-link\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#0066c0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20flex-start;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG[_0x132cdb(0x10a)]['adContainer']+'\x20.ad-link:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#c45500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG[_0x132cdb(0x10a)][_0x132cdb(0x10f)]+_0x132cdb(0x162)+CONFIG[_0x132cdb(0x10a)][_0x132cdb(0x10f)]+_0x132cdb(0x142)+CONFIG['ids'][_0x132cdb(0x10f)]+_0x132cdb(0x113),document[_0x132cdb(0x14b)][_0x132cdb(0x166)](_0x307e7a);}function _0x12e4(_0x785903,_0x3fb080){const _0xfbefcc=_0xfbef();return _0x12e4=function(_0x12e44b,_0x263710){_0x12e44b=_0x12e44b-0x104;let _0x385d1b=_0xfbefcc[_0x12e44b];return _0x385d1b;},_0x12e4(_0x785903,_0x3fb080);}function createAdContainer(){const _0x5ce357=_0x42ea0a,_0x2b06aa=document[_0x5ce357(0x13a)]('div');_0x2b06aa['id']=CONFIG[_0x5ce357(0x10a)][_0x5ce357(0x10f)];const _0x2e53d8=document[_0x5ce357(0x13a)]('a');_0x2e53d8[_0x5ce357(0x13c)]=CONFIG[_0x5ce357(0x124)][_0x5ce357(0x15f)],_0x2e53d8[_0x5ce357(0x108)]=_0x5ce357(0x146),_0x2e53d8[_0x5ce357(0x120)]=_0x5ce357(0x10e),_0x2e53d8['rel']='noopener\x20noreferrer';const _0x55bea1=document[_0x5ce357(0x13a)](_0x5ce357(0x11a));_0x55bea1[_0x5ce357(0x12e)]=CONFIG[_0x5ce357(0x124)]['thumbnail'],_0x55bea1[_0x5ce357(0x117)]=CONFIG['article'][_0x5ce357(0x14a)],_0x55bea1[_0x5ce357(0x108)]='ad-thumbnail';const _0x10f966=document[_0x5ce357(0x13a)](_0x5ce357(0x118));return _0x10f966['textContent']=CONFIG['article']['title'],_0x10f966[_0x5ce357(0x108)]='ad-title',_0x2e53d8[_0x5ce357(0x166)](_0x55bea1),_0x2e53d8[_0x5ce357(0x166)](_0x10f966),_0x2b06aa[_0x5ce357(0x166)](_0x2e53d8),_0x2b06aa;}function showBarChart(){const _0x2448f4=_0x42ea0a,{labels:_0x9b4e04,datasets:_0x1b6266}=createChartDataset(),_0x559016=createGraphContainer();console[_0x2448f4(0x105)](_0x9b4e04,_0x1b6266),appendGraphContainerToDOM(_0x559016),renderChart(_0x559016['querySelector']('#'+CONFIG[_0x2448f4(0x10a)][_0x2448f4(0x10c)]),_0x9b4e04,_0x1b6266);}function _0xfbef(){const _0x53ea31=['\x20.ad-link:hover\x20.ad-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20underline;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','.a-declarative','[data-action=\x22show-all-offers-display\x22]','4394952kIhkAf','appendChild','1673GEUWai','all-offers-display-scroller','log','15761810MVtlnT','trim','className','location','ids','6CMMndo','chart','graphContainer','_blank','adContainer','#f08080','sort','6oJBhkG','\x20.ad-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2013px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x2019px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','length','childList','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','alt','span','onerror','img','3486005KvajtZ','filter','Reached\x20the\x20bottom\x20of\x20the\x20scrollable\x20div.','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','bar','target','onload','click','#buybox-see-all-buying-choices\x20a','article','message','after','::before\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20content:\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x20-10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x201px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','width','9LNhwro','querySelector','#aod-pinned-offer','132263cbnuPk','16451512yqfbXB','src','style','scrollTop','body','中古商品\x20-\x20ほぼ新品','forEach','13IeCamT','Error\x20in\x20getStockAndPrice:','entries','ほぼ新品','type','height','createElement','amzn-ad-container','href','innerText','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20280px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','Failed\x20to\x20load\x20','getContext','このブックマークレットはAmazon.co.jpでのみ使用できます。','\x20.ad-thumbnail\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20120px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x2080px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','47440mJShoF','[id*=\x22aod-offer-qty-component-\x22]','map','ad-link','#5fba7d','fromEntries','error','title','head','scrollHeight','chartJs','44241MWRwee','グラフはすでに表示されています。再読み込みしてから再度実行してください。','amzn-graph-container','observe','#f3e20e','innerHTML','from','[data-action=\x22aod-close-on-esc-action\x22]','querySelectorAll','https://note.com/kosk_sdr/n/n071896d9278d','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','replace','#dynamic-aod-ingress-box,\x20#unqualifiedBuyBox','中古商品\x20-\x20非常に良い','www.amazon.co.jp','.a-price\x20.a-price-whole','4zWkFGT','url','出品者が1人以下のためグラフ描画を中止します。','https://raw.githubusercontent.com/koskengineering/ASCFree/refs/heads/main/eyecatch.png'];_0xfbef=function(){return _0x53ea31;};return _0xfbef();}function initializeScript(){const _0x1765d5=_0x42ea0a;try{if(window[_0x1765d5(0x109)]['hostname']!==_0x1765d5(0x15c))throw new Error(_0x1765d5(0x141));if(document['getElementById'](CONFIG[_0x1765d5(0x10a)][_0x1765d5(0x10d)]))throw new Error(_0x1765d5(0x14f));loadChartJsLibrary();}catch(_0x39ee5d){alert(_0x39ee5d[_0x1765d5(0x125)]);}}async function loadChartJsLibrary(){const _0x575cd8=_0x42ea0a;try{await loadScript(CONFIG[_0x575cd8(0x14d)]),await clickAndScroll();}catch(_0xa99582){alert('Chart.jsの読み込みに失敗しました:\x20'+_0xa99582[_0x575cd8(0x125)]);}}function loadScript(_0x4431ad){return new Promise((_0x368649,_0x1357d9)=>{const _0x5bca45=_0x12e4,_0x1e8eb2=document[_0x5bca45(0x13a)]('script');_0x1e8eb2[_0x5bca45(0x12e)]=_0x4431ad,_0x1e8eb2[_0x5bca45(0x121)]=_0x368649,_0x1e8eb2[_0x5bca45(0x119)]=()=>_0x1357d9(new Error(_0x5bca45(0x13f)+_0x4431ad)),document[_0x5bca45(0x14b)][_0x5bca45(0x166)](_0x1e8eb2);});}function createChartDataset(){const _0x35b53b=_0x42ea0a,_0x153174=getAllSellersInfo(),_0x17ea0b=Array[_0x35b53b(0x154)](new Set(_0x153174[_0x35b53b(0x145)](_0x5a8446=>_0x5a8446[0x1])))[_0x35b53b(0x111)]((_0x376a46,_0x1bada3)=>_0x376a46-_0x1bada3),_0x15bda4=filterSellersByCondition(_0x153174,'新品'),_0x562f6e=filterSellersByCondition(_0x153174,_0x35b53b(0x15b)),_0xa9984c=filterSellersByCondition(_0x153174,_0x35b53b(0x132)),_0x51b67b=filterSellersByCondition(_0x153174,'中古商品\x20-\x20良い'),_0x565089=filterSellersByCondition(_0x153174,'中古商品\x20-\x20可');return{'labels':_0x17ea0b['map'](_0x1fa9bd=>String(_0x1fa9bd)),'datasets':[{'label':'新品','data':mapPricesToLabels(_0x17ea0b,sumByIndex(_0x15bda4)),'backgroundColor':'#de7921'},{'label':'非常に良い','data':mapPricesToLabels(_0x17ea0b,sumByIndex(_0x562f6e)),'backgroundColor':_0x35b53b(0x147)},{'label':_0x35b53b(0x137),'data':mapPricesToLabels(_0x17ea0b,sumByIndex(_0xa9984c)),'backgroundColor':'#4dc0b5'},{'label':'良い','data':mapPricesToLabels(_0x17ea0b,sumByIndex(_0x51b67b)),'backgroundColor':_0x35b53b(0x152)},{'label':'可','data':mapPricesToLabels(_0x17ea0b,sumByIndex(_0x565089)),'backgroundColor':_0x35b53b(0x110)}]};}function mapPricesToLabels(_0x3793d1,_0x10e5a9){const _0x22c427=_0x42ea0a,_0x653414=Object[_0x22c427(0x148)](_0x10e5a9);return _0x3793d1[_0x22c427(0x145)](_0x477f45=>_0x653414[_0x477f45]||0x0);}function getAllSellersInfo(){const _0x34695f=_0x42ea0a,_0x5286e2=[],_0x19cef7=[document[_0x34695f(0x12a)](_0x34695f(0x12b)),...Array['from'](document[_0x34695f(0x156)]('#aod-offer'))];for(const _0x496130 of _0x19cef7){const _0x2ee654=getStockAndPrice(_0x496130);if(_0x2ee654)_0x5286e2['push'](_0x2ee654);}return _0x5286e2;}function filterNewSellers(_0x11e7c2){const _0x44fe61=_0x42ea0a;return _0x11e7c2[_0x44fe61(0x11c)](_0x1221ce=>_0x1221ce[0x0]==='新品')[_0x44fe61(0x145)](_0x2e92b1=>[_0x2e92b1[0x1],_0x2e92b1[0x2]]);}function filterSellersByCondition(_0x5ce2ac,_0x7c25a1){const _0x3023cf=_0x42ea0a;return _0x5ce2ac[_0x3023cf(0x11c)](_0x3ecd93=>_0x3ecd93[0x0]===_0x7c25a1)['map'](_0x7e7fdb=>[_0x7e7fdb[0x1],_0x7e7fdb[0x2]]);}function sumByIndex(_0x379226){const _0x6a7e2=_0x42ea0a,_0x2f4682={};return _0x379226[_0x6a7e2(0x133)](([_0x241b0b,_0x1cc17b])=>{_0x2f4682[_0x241b0b]=(_0x2f4682[_0x241b0b]||0x0)+parseInt(_0x1cc17b);}),Object[_0x6a7e2(0x136)](_0x2f4682);}function createGraphContainer(){const _0x3698d5=_0x42ea0a,_0x250ef7=document['createElement']('div');_0x250ef7['id']=CONFIG[_0x3698d5(0x10a)][_0x3698d5(0x10d)];const _0x3e270c=createCanvas();_0x250ef7['appendChild'](_0x3e270c);const _0x30a288=document[_0x3698d5(0x13a)]('hr');_0x250ef7[_0x3698d5(0x166)](_0x30a288);const _0x4c12a0=createAdContainer();return _0x250ef7[_0x3698d5(0x166)](_0x4c12a0),addContainerStyles(),_0x250ef7;}function addContainerStyles(){const _0x59f147=_0x42ea0a,_0x3e3f81=document[_0x59f147(0x13a)](_0x59f147(0x12f));_0x3e3f81['innerHTML']=_0x59f147(0x158)+CONFIG['ids'][_0x59f147(0x10d)]+_0x59f147(0x11e),document[_0x59f147(0x14b)]['appendChild'](_0x3e3f81);}function createCanvas(){const _0x106340=_0x42ea0a,_0x41009b=document[_0x106340(0x13a)]('canvas');return _0x41009b['id']=CONFIG[_0x106340(0x10a)][_0x106340(0x10c)],_0x41009b[_0x106340(0x128)]=0x118,_0x41009b[_0x106340(0x139)]=0x190,_0x41009b;}function appendGraphContainerToDOM(_0x4735f9){const _0x16d52d=_0x42ea0a,_0x15c7c4=document[_0x16d52d(0x12a)](_0x16d52d(0x15a));_0x15c7c4[_0x16d52d(0x126)](_0x4735f9);}function renderChart(_0x52996c,_0x21e5e0,_0x37e153){const _0x3efcc4=_0x42ea0a,_0x16c0e2=_0x52996c[_0x3efcc4(0x140)]('2d');new Chart(_0x16c0e2,{'type':_0x3efcc4(0x11f),'data':{'labels':_0x21e5e0,'datasets':_0x37e153},'options':{'indexAxis':'y','scales':{'x':{'stacked':!![],'min':0x0},'y':{'stacked':!![],'reverse':![]}},'responsive':!![],'plugins':{'legend':{'position':'top'}}}});}async function scrollDivToBottom(){const _0x5cce94=_0x42ea0a,_0x5bdc2c=document['getElementById'](_0x5cce94(0x104));if(!_0x5bdc2c){showBarChart();const _0x3b96a5=document[_0x5cce94(0x12a)]('[data-action=\x22close-all-offers-display\x22]');if(_0x3b96a5)_0x3b96a5['click']();return;}try{let _0x4a85ef=_0x5bdc2c[_0x5cce94(0x130)],_0x4535e7=0x0;const _0x32afad=0xa;while(_0x4535e7<_0x32afad){_0x5bdc2c[_0x5cce94(0x130)]=_0x5bdc2c[_0x5cce94(0x14c)],await new Promise(_0x2cfb71=>setTimeout(_0x2cfb71,0x3e8));if(_0x5bdc2c['scrollTop']===_0x4a85ef){console[_0x5cce94(0x105)](_0x5cce94(0x11d));break;}_0x4a85ef=_0x5bdc2c[_0x5cce94(0x130)],_0x4535e7++;}showBarChart();}catch(_0x279b3e){console[_0x5cce94(0x149)]('Error\x20during\x20scrolling:',_0x279b3e),alert('スクロール中にエラーが発生しました。');}finally{const _0x3a78d6=document[_0x5cce94(0x12a)]('[data-action=\x22close-all-offers-display\x22]');if(_0x3a78d6)_0x3a78d6[_0x5cce94(0x122)]();}}function clickAndScroll(){const _0x440349=_0x42ea0a,_0x6eb374=document[_0x440349(0x12a)](_0x440349(0x164));if(!_0x6eb374){alert(_0x440349(0x160));return;}else{const _0x40af64=_0x6eb374[_0x440349(0x12a)](_0x440349(0x123));console[_0x440349(0x105)](_0x40af64),!_0x40af64?_0x6eb374[_0x440349(0x122)]():_0x40af64[_0x440349(0x122)]();}const _0x51ef83=new MutationObserver((_0x2c6264,_0x10f43b)=>{const _0x2aec8a=_0x440349;for(let _0x82f9f6 of _0x2c6264){if(_0x82f9f6[_0x2aec8a(0x138)]===_0x2aec8a(0x115)){const _0x32c599=document[_0x2aec8a(0x12a)](_0x2aec8a(0x155));if(_0x32c599){scrollDivToBottom(),_0x10f43b['disconnect']();break;}}}});_0x51ef83[_0x440349(0x151)](document[_0x440349(0x131)],{'childList':!![],'subtree':!![]});}function getStockAndPrice(_0x38646c){const _0x4c1f0=_0x42ea0a;try{const _0x234486=_0x38646c['querySelector']('#aod-offer-heading')['textContent'][_0x4c1f0(0x107)]()[_0x4c1f0(0x159)]('\x0a','\x20')[_0x4c1f0(0x159)](/ +/g,'\x20'),_0x47f1e2=parseInt(_0x38646c[_0x4c1f0(0x12a)](_0x4c1f0(0x15d))[_0x4c1f0(0x13d)][_0x4c1f0(0x159)](/[^0-9]/g,''));let _0x35789b=0x1;const _0xfc5982=_0x38646c['querySelector'](_0x4c1f0(0x144));if(_0xfc5982){const _0xad1ce5=_0xfc5982[_0x4c1f0(0x156)](_0x4c1f0(0x163));_0x35789b=parseInt(_0xad1ce5[_0xad1ce5[_0x4c1f0(0x114)]-0x1][_0x4c1f0(0x13d)][_0x4c1f0(0x159)](/[^0-9]/g,''));}return[_0x234486,_0x47f1e2,_0x35789b];}catch(_0x3ffdbf){return console[_0x4c1f0(0x105)](_0x4c1f0(0x135),_0x3ffdbf['message']),null;}}initializeScript();